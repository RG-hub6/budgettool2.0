<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Budgettool 5.0</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  padding:20px;
}

h1 { margin-bottom:10px; }

#months button {
  margin:3px;
  padding:6px 10px;
  border:none;
  cursor:pointer;
}

.active {
  background:#2196f3;
  color:white;
}

.card {
  background:white;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
}

input, select {
  padding:6px;
  margin:4px 0;
}

.summary {
  display:flex;
  gap:20px;
  margin:15px 0;
  font-weight:bold;
}

canvas { background:white; border-radius:6px; }
</style>
</head>

<body>

<h1>ðŸ“Š Budgettool 5.0</h1>

<div id="months"></div>

<div class="summary">
  <div>Inkomsten: â‚¬ <span id="income">0</span></div>
  <div>Uitgaven: â‚¬ <span id="expense">0</span></div>
  <div>Saldo: â‚¬ <span id="balance">0</span></div>
</div>

<canvas id="chart" width="420" height="200"></canvas>

<hr>

<h2>Nieuwe invoer</h2>

<input id="category" placeholder="Categorie (bv. Wonen > Huur)">
<br>

<input id="amount" type="number" placeholder="Bedrag">
<br>

<select id="kind">
  <option value="expense">Uitgave</option>
  <option value="income">Inkomen</option>
</select>

<select id="frequency">
  <option value="once">Eenmalig</option>
  <option value="week">Wekelijks</option>
  <option value="month">Maandelijks</option>
  <option value="year">Jaarlijks</option>
</select>

<br>
<button onclick="addEntry()">Toevoegen</button>

<hr>

<h2>Overzicht</h2>
<div id="list"></div>

<script>
const months = [
  "Januari","Februari","Maart","April","Mei","Juni",
  "Juli","Augustus","September","Oktober","November","December"
];

let currentMonth = 0;
let entries = [];

function renderMonths() {
  const div = document.getElementById("months");
  div.innerHTML = "";
  months.forEach((m,i)=>{
    const b = document.createElement("button");
    b.innerText = m;
    if(i===currentMonth) b.className="active";
    b.onclick=()=>{currentMonth=i; render();}
    div.appendChild(b);
  });
}

function addEntry() {
  const cat = document.getElementById("category").value.trim();
  const amt = parseFloat(document.getElementById("amount").value);
  const kind = document.getElementById("kind").value;
  const freq = document.getElementById("frequency").value;

  if(!cat || isNaN(amt)) return;

  entries.push({cat, amt, kind, freq});
  document.getElementById("amount").value="";
  render();
}

function appliesThisMonth(e, m) {
  if(e.freq==="once") return m===currentMonth;
  if(e.freq==="month") return true;
  if(e.freq==="year") return m===0;
  if(e.freq==="week") return true;
}

function calculate() {
  let inc=0, exp=0;
  entries.forEach(e=>{
    if(appliesThisMonth(e,currentMonth)){
      if(e.kind==="income") inc+=e.amt;
      else exp+=e.amt;
    }
  });
  return {inc,exp,bal:inc-exp};
}

function renderList() {
  const div=document.getElementById("list");
  div.innerHTML="";
  entries.forEach(e=>{
    if(appliesThisMonth(e,currentMonth)){
      const d=document.createElement("div");
      d.className="card";
      d.innerText=`${e.cat} â€” â‚¬${e.amt} (${e.kind}, ${e.freq})`;
      div.appendChild(d);
    }
  });
}

function renderChart(t){
  const c=document.getElementById("chart");
  const ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);

  const vals=[t.inc,t.exp];
  const cols=["#4caf50","#f44336"];
  const max=Math.max(...vals,1);

  vals.forEach((v,i)=>{
    const h=(v/max)*150;
    ctx.fillStyle=cols[i];
    ctx.fillRect(80+i*140,180-h,60,h);
  });
}

function render(){
  renderMonths();
  const t=calculate();
  document.getElementById("income").innerText=t.inc.toFixed(2);
  document.getElementById("expense").innerText=t.exp.toFixed(2);
  document.getElementById("balance").innerText=t.bal.toFixed(2);
  renderChart(t);
  renderList();
}

render();
</script>

</body>
</html>

